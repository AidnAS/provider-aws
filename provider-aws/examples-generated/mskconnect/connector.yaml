apiVersion: mskconnect.aws.upbound.io/v1alpha1
kind: Connector
metadata:
  name: example
spec:
  forProvider:
    capacity:
    - autoscaling:
      - maxWorkerCount: 2
        mcuCount: 1
        minWorkerCount: 1
        scaleInPolicy:
        - cpuUtilizationPercentage: 20
        scaleOutPolicy:
        - cpuUtilizationPercentage: 80
    connectorConfiguration:
      connector.class: com.github.jcustenborder.kafka.connect.simulator.SimulatorSinkConnector
      tasks.max: "1"
      topics: example
    kafkaCluster:
    - apacheKafkaCluster:
      - bootstrapServers: ${aws_msk_cluster.example.bootstrap_brokers_tls}
        vpc:
        - securityGroups:
          - ${aws_security_group.example.id}
          subnets:
          - ${aws_subnet.example1.id}
          - ${aws_subnet.example2.id}
          - ${aws_subnet.example3.id}
    kafkaClusterClientAuthentication:
    - authenticationType: NONE
    kafkaClusterEncryptionInTransit:
    - encryptionType: TLS
    kafkaconnectVersion: 2.7.1
    name: example
    plugin:
    - customPlugin:
      - arn: ${aws_mskconnect_custom_plugin.example.arn}
        revision: ${aws_mskconnect_custom_plugin.example.latest_revision}
    serviceExecutionRoleArnRef:
      name: example
  providerConfigRef:
    name: example
