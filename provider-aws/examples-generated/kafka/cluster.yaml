apiVersion: kafka.aws.upbound.io/v1alpha1
kind: Cluster
metadata:
  name: example
spec:
  forProvider:
    brokerNodeGroupInfo:
    - clientSubnets:
      - ${aws_subnet.subnet_az1.id}
      - ${aws_subnet.subnet_az2.id}
      - ${aws_subnet.subnet_az3.id}
      instanceType: kafka.m5.large
      securityGroups:
      - ${aws_security_group.sg.id}
      storageInfo:
      - ebsStorageInfo:
        - volumeSize: 1000
    clusterName: example
    encryptionInfo:
    - encryptionAtRestKmsKeyArn: ${aws_kms_key.kms.arn}
    kafkaVersion: 2.4.1
    loggingInfo:
    - brokerLogs:
      - cloudwatchLogs:
        - enabled: true
          logGroup: Yada
        firehose:
        - deliveryStream: terraform-kinesis-firehose-extended-s3-test-stream
          enabled: true
        s3:
        - bucket: ${aws_s3_bucket.bucket.id}
          enabled: true
          prefix: logs/msk-
    numberOfBrokerNodes: 3
    openMonitoring:
    - prometheus:
      - jmxExporter:
        - enabledInBroker: true
        nodeExporter:
        - enabledInBroker: true
    tags:
      foo: bar
  providerConfigRef:
    name: example
